# Swing object-view mapping

Небольшая библиотека для быстрой разработки форм ввода простых параметров в Java Swing.

![Пример отображения](https://github.com/ebuldygin/ovm/blob/images/demo.png)

Такая штука может пригодиться для разработки интерфейсов десктопных Java-приложений, для которых, 
в общем-то, красота и эргономика не требуются, но необходима хоть какая-нибудь форма ввода параметров.
Непосредственное использование Java Swing для, казалось бы, тривиальных задач разметки, сбора и валидации 
введённых параметров порождает огромное количество кода и операций, процесс разработки отдаляется от 
решения основной задачи, становится скучным, вызывает депрессию и тошноту. С помощью же разработанного 
OVM-фреймворка достаточно задать отображение полей класса на поля формы, и можно создавать панели для 
ввода параметров одной строкой. Более того, сбор или установка данных на такой форме также укладывается 
в одну строчку!

Проект содержит два модуля, для использования в своих приложениях потребуется модуль ovm-core.

Класс, который необходимо поместить на форму помечается аннотацией ``@Form``, поля для отображения 
на форме (или методы чтения в соответствии с JavaBean) - аннотацией ``@Parameter``.
В аннотациях для параметров можно задавать название, порядок, конвертеры и название поля.
Конвертеры необходимо задавать для преобразование значения параметра в значение в виджете и обратно.
Если в аннотации ``@Parameter`` не прописан ни один конвертер, то используется любой подходящий 
конвертер по умолчанию:
* ``IdentityConverter`` - тождественный конвертер, если тип в виджете совпадает с типом параметра
* ``ValueOfConverter`` - если в виджете нужна строка, а в классе параметра есть метод ``static valueOf(String)``

Логические поля в классе могут объединяться в логические группы с помощью аннотации ``@LogicalGroup``, причём
каждое поле может быть объявлено только в одной группе. Объявление групп носит семантический характер, 
никаких средств для контроля значений в исключающих группах нет.

Поддерживаемые типы для Swing (из коробки):
* все простые типы и их оболочки 
* ``String``
* ``org.mathcuprum.ovm.swing.RangedNumber`` (число из интервала)
* все классы, где есть статический метод ``valueOf(String)`` и ``o.equals(o.valueOf(o.toString()))``
* классы, помеченные аннотацией ``@Form``

В механизме есть возможность для композиции и для наследования.

### Композиция

Если класс поля не помечен аннотацией ``@Form``, то для него должен быть
конвертер и соответствующий виджет. Это потребует расширения класса ``SwingBuilder``.
Если класс поля помечен аннотацией ``@Form``, то в Swing будет создана соответствующая панель с названием из 
``@Parameter``, а не ``@Form``

### Наследование

При наследовании все параметры (поля/методы доступа, помеченные аннотацией ``@Parameter``), объявленные 
в родительском классе (если помечен аннотацией ``@Form``) переходят к наследнику, за исключением полей, 
объявленных в аннотации ``@ExcludeInherited``.

### Получение виджета для поля.
После создания панели можно получить виджет для конкретного поля модели.
Поиск на форме осуществляется по имени параметра, если параметр вложенный, то необходимо указать путь
к этому параметру (имена параметров через точку).